# Strands Agent with S3 Code Deployment
# No Docker required - just Python code uploaded to S3

service: strands-s3-agent

provider:
  name: aws
  region: ${opt:region, 'us-east-1'}
  stage: ${opt:stage, 'dev'}

custom:
  agentCore:
    defaultTags:
      Project: ${self:service}
      Framework: Strands
      DeploymentType: S3Code

agents:
  # AgentCore Runtime using S3 code artifact (no Docker)
  codeAgent:
    type: runtime
    description: Strands agent deployed from S3 code artifact
    artifact:
      s3:
        bucket: ${self:service}-artifacts-${self:provider.stage}
        key: agent.zip
      # Python runtime version
      runtime: PYTHON_3_12
      # Entry point: path to the Python file in the ZIP
      # File must use @app.entrypoint from bedrock_agentcore.runtime
      entryPoint:
        - handler.py
    protocol: HTTP
    network:
      networkMode: PUBLIC
    # Optional: session lifecycle
    lifecycle:
      idleRuntimeSessionTimeout: 300  # 5 minutes
      maxLifetime: 3600               # 1 hour
